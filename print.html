<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Tony Williams">
  <title>Beginning Bash</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="reveal.js/css/theme/white.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
  <h1 class="title">Beginning Bash</h1>
  <h2 class="author">Tony Williams</h2>
  <h3 class="date">X World 2016</h3>
</section>

<section id="setting-up-terminal" class="slide level3">
<h1>Setting Up <code>Terminal</code></h1>
</section>
<section id="looking-good" class="slide level3">
<h1>Looking Good</h1>
<ul>
<li>A Good Profile 'Solarized'</li>
<li>Setting Font and Size</li>
<li>Setting Window Size</li>
</ul>
<aside class="notes">
<p>A good start is to make Terminal look better. You can colorize the output with a profile and use a better font and bigger font size. I've included my favourite Terminal theme 'Solarized', and my favourite monospaced font, Input. You can customise Input if you go to it's web site.</p>
</aside>
</section>
<section id="before-we-begin" class="slide level3">
<h1>Before We Begin</h1>
<ul>
<li>Homebrew</li>
<li>coreutils</li>
<li>dockutil</li>
<li>source-highlight</li>
</ul>
<aside class="notes">
<p>Before we start we need to install a couple of packages. We will do that with <code>homebrew</code>.</p>
<p>coreutils is a pack of general utilities from the Gnu project. We install these as Linux uses them.</p>
<p>dockutil is a Python script to manipulate the Dock. We will use it in a script later.</p>
<p>source-highlight is a package from the Gnu project that highlights source code. We use it for that purpose.</p>
</aside>
</section>
<section id="source-a-file" class="slide level3">
<h1><code>source</code> A File</h1>
<ul>
<li>bash_profile.sh</li>
</ul>
<aside class="notes">
<p>if we run a shell script it runs in a different shell process so any changes we make to the way bash runs or looks disappear at the end of the script.</p>
<p>We can get around this with the <code>source</code> command. This takes a text file and behaves exactly if we had typed it into the command line ourselves.</p>
</aside>
</section>
<section id="defaults-read" class="slide level3">
<h1><code>defaults</code> Read</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">defaults</span> read com.apple.dock <span class="kw">|</span> <span class="kw">less</span></code></pre></div>
<aside class="notes">
<p><code>defaults</code> is a command that allows us to read, write, and delete Mac OS X user defaults from the command-line. Here we are reading the preferences for the dock. Notice the bar and <code>less</code>. bash allows us to &quot;pipe&quot; the output from one command as the input of another.</p>
</aside>
</section>
<section id="defaults" class="slide level3">
<h1><code>defaults</code></h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">defaults</span> write com.apple.dock autohide -bool YES <span class="kw">;</span> <span class="kw">killall</span> Dock
<span class="kw">defaults</span> write com.apple.dock autohide -bool NO <span class="kw">;</span> <span class="kw">killall</span> Dock
<span class="kw">defaults</span> write com.apple.dock orientation <span class="st">&quot;right&quot;</span> <span class="kw">;</span> <span class="kw">killall</span> Dock
<span class="kw">defaults</span> write com.apple.dock orientation <span class="st">&quot;bottom&quot;</span> <span class="kw">;</span> <span class="kw">killall</span> Dock</code></pre></div>
<aside class="notes">
<p>Now we use 'write' to change the preferences. After we type the first one we can use line editing to get the next 3 lines. C-a goes to start of the line, C-e goes to the end. Esc-f goes forward a word and Esc-b goes a word back. Esc-d deletes the next word.</p>
</aside>
</section>
<section id="shell-programming" class="slide level3">
<h1>Shell Programming</h1>
</section>
<section id="variables" class="slide level3">
<h1>Variables</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">WORD=</span><span class="st">&quot;Foobar&quot;</span> ; <span class="kw">echo</span> <span class="ot">$WORD</span></code></pre></div>
<aside class="notes">
<p>Here we see how to set a variable and how to use one. Notice the semi-colon? We use a semi-colon to seperate two commands on the same line.</p>
</aside>
</section>
<section id="pretty-prompt" class="slide level3">
<h1>Pretty Prompt</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">PS1=</span><span class="st">&quot;\[\033[34m\]\h:\w \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span></code></pre></div>
<aside class="notes">
<p>The shell has a number of special variables. PS1 is one, it sets the look of your prompt.</p>
</aside>
</section>
<section id="alias-fun" class="slide level3">
<h1>Alias fun</h1>
<ul>
<li>Commonly used options</li>
<li>Hard to remember options</li>
</ul>
</section>
<section id="alias-examples" class="slide level3">
<h1>Alias Examples</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">LS_OPTIONS=</span><span class="st">&quot;--color=auto -F -G&quot;</span>
<span class="co"># standard ls coloured</span>
<span class="kw">alias</span> ls=<span class="st">&#39;gls $LS_OPTIONS&#39;</span>
<span class="co"># standard plus dot files</span>
<span class="kw">alias</span> la=<span class="st">&#39;gls $LS_OPTIONS -A&#39;</span>
<span class="co"># long ls</span>
<span class="kw">alias</span> ll=<span class="st">&#39;gls $LS_OPTIONS -l&#39;</span>
<span class="kw">alias</span> l=<span class="st">&#39;gls $LS_OPTIONS -lA&#39;</span></code></pre></div>
<aside class="notes">
<p>Here we have some aliases for a command with long and hard to remember options. An alias becomes a literal command so you can have options and arguments after it, but you can't pass an argument to the middle of it. This requires a function.</p>
</aside>
</section>
<section id="first-steps---just-a-little-function" class="slide level3">
<h1>First Steps - Just A Little Function</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># function to send man page to preview</span>
<span class="fu">manp()</span>
<span class="kw">{</span>
<span class="kw">man</span> -t <span class="ot">$*</span> <span class="kw">|</span> <span class="kw">open</span> -f -a /Applications/Preview.app/
<span class="kw">}</span></code></pre></div>
<aside class="notes">
<p>Here's a function that allows multiple arguments in the middle. The <code>$*</code> will be replaced by all the arguments on the command line.</p>
</aside>
</section>
<section id="bigger-function---pass-paramters" class="slide level3">
<h1>Bigger Function - Pass Paramters</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"></code></pre></div>
</section>
<section id="decisions-decisions" class="slide level3">
<h1>Decisions, Decisions</h1>
<ul>
<li>If, else, then</li>
<li>Case</li>
<li>Using '&amp;&amp;' and '||'</li>
</ul>
</section>
<section id="example-decision" class="slide level3">
<h1>Example Decision</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># make root red</span>
<span class="kw">if [</span> <span class="kw">`id</span> -u<span class="kw">`</span> <span class="ot">=</span> 0<span class="kw"> ]</span>
<span class="kw">then</span>
        <span class="ot">PS1=</span><span class="st">&quot;\[\033[31m\]\h:\W \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>An if statement. In this one we decide if we want to change the colour of the prompt depending if we are <code>root</code> or not. Not the <code>id -u</code> between the backticks. When we place a command between backticks the command is run and the output is used. Here we have the <code>id</code> shell command print our user ID, which is 0 if we are root.</p>
</aside>
</section>
<section id="colour-ls" class="slide level3">
<h1>Colour <code>ls</code></h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"> <span class="co"># colours for the Gnu ls (from coreutils)</span>
<span class="kw">if [</span> <span class="st">&quot;</span><span class="ot">$TERM</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;dumb&quot;</span><span class="kw"> ]</span>; <span class="kw">then</span>
    <span class="kw">export</span> <span class="ot">LS_OPTIONS=</span><span class="st">&#39;--color=auto -F -G -h&#39;</span>
    <span class="kw">eval</span> <span class="kw">`gdircolors</span> ~/.dircolors<span class="kw">`</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>Here's another if statement. Notice that this time we don't have a return before the <code>then</code>, instead we have a semi-colon, <code>;</code> to represent the same thing. On any line we can replace a return with a semi-colon.</p>
</aside>
</section>
<section id="make-a-case" class="slide level3">
<h1>Make A Case</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="kw">echo</span> -n <span class="st">&quot;Word: &quot;</span> <span class="kw">;</span> <span class="kw">read</span> <span class="ot">WORD</span>

<span class="kw">case</span> <span class="ot">$WORD</span><span class="kw"> in</span>
    <span class="kw">(</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">)</span>    <span class="kw">echo</span> <span class="st">&quot;No Way&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="kw">*</span> <span class="kw">)</span>           <span class="kw">echo</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">;;</span>
<span class="kw">esac</span></code></pre></div>
<aside class="notes">
<p>Here is a case statement. If the variable matches the value in the parentheses it runs the statement on that line. The value <code>( * )</code> matches everything. The <code>read</code> statement reads from the command line until you press return.</p>
</aside>
</section>
<section id="using-and" class="slide level3">
<h1>Using &amp;&amp; and ||</h1>
<p>A <strong>AND</strong> B <strong>OR</strong> C</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">[</span> <span class="kw">`id</span> -u<span class="kw">`</span> <span class="ot">=</span> 0<span class="kw"> ]</span> <span class="kw">&amp;&amp;</span> <span class="ot">PS1=</span><span class="st">&quot;\[\033[31m\]\h:\W \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span> <span class="kw">\</span>
<span class="kw">||</span> <span class="ot">PS1=</span><span class="st">&quot;\[\033[34m\]\h:\w \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span></code></pre></div>
<aside class="notes">
<p>Here we use logic operators rather than if and else. This is perfect if you only want to run single commands. It works because the shell is &quot;lazy&quot; and won't run the second command in an AND when the first is false, then because the first set of statements is false it will run the command after the OR.</p>
</aside>
</section>
<section id="checking-the-result-code" class="slide level3">
<h1>Checking The Result Code</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">if</span> <span class="kw">ls</span> mysillyfilename <span class="kw">;</span> <span class="kw">then</span>
    <span class="kw">echo</span> <span class="st">&quot;File exists.&quot;</span>
<span class="kw">fi</span>

<span class="co"># checking result code variable</span>
<span class="kw">ls</span> mysillyfilename
<span class="kw">if [</span> <span class="ot">$?</span> <span class="ot">=</span> 0<span class="kw"> ]</span> ; <span class="kw">then</span>
    <span class="kw">echo</span> <span class="st">&quot;File exists.&quot;</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>We can use the result from any command in an <code>if</code> statement. The special variable <code>$?</code> saves the result of the last command.</p>
</aside>
</section>
<section id="checking-a-file" class="slide level3">
<h1>Checking A File</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># send message to my phone via Pushover</span>
<span class="co"># API and user keys are in my TOKENS file outside the repo.</span>
<span class="fu">pushover()</span> <span class="kw">{</span>
    <span class="ot">PUSHOVERURL=</span><span class="st">&quot;https://api.pushover.net/1/messages.json&quot;</span>

    <span class="ot">TITLE=</span><span class="st">&quot;</span><span class="ot">${1}</span><span class="st">&quot;</span> ; <span class="ot">MESSAGE=</span><span class="st">&quot;</span><span class="ot">${2}</span><span class="st">&quot;</span> ; <span class="ot">DEVICE=</span><span class="st">&quot;</span><span class="ot">${3}</span><span class="st">&quot;</span>

    <span class="kw">curl</span> \
    -F <span class="st">&quot;token=</span><span class="ot">${PUSHOVER_API}</span><span class="st">&quot;</span> -F <span class="st">&quot;user=</span><span class="ot">${PUSHOVER_USER}</span><span class="st">&quot;</span> \
    -F <span class="st">&quot;device=</span><span class="ot">${DEVICE}</span><span class="st">&quot;</span> -F <span class="st">&quot;title=</span><span class="ot">${TITLE}</span><span class="st">&quot;</span> \
    -F <span class="st">&quot;message=</span><span class="ot">${MESSAGE}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="ot">${PUSHOVERURL}</span><span class="st">&quot;</span> <span class="kw">&gt;</span> /dev/null <span class="kw">2&gt;&amp;1</span>
<span class="kw">}</span></code></pre></div>
<aside class="notes">
<p>Here we have a function where we are passing parameters. Notice we have to do it by number and it is 1 indexed.</p>
</aside>
</section>
<section id="decisions-decisions-1" class="slide level3">
<h1>Decisions, Decisions</h1>
<ul>
<li>If, else, then</li>
<li>Case</li>
<li>Using '&amp;&amp;' and '||'</li>
</ul>
</section>
<section id="example-decision-1" class="slide level3">
<h1>Example Decision</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># make root red</span>
<span class="kw">if [</span> <span class="kw">`id</span> -u<span class="kw">`</span> <span class="ot">=</span> 0<span class="kw"> ]</span>
<span class="kw">then</span>
        <span class="ot">PS1=</span><span class="st">&quot;\[\033[31m\]\h:\W \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>An if statement. In this one we decide if we want to change the colour of the prompt depending if we are <code>root</code> or not. Not the <code>id -u</code> between the backticks. When we place a command between backticks the command is run and the output is used. Here we have the <code>id</code> shell command print our user ID, which is 0 if we are root.</p>
</aside>
</section>
<section id="colour-ls-1" class="slide level3">
<h1>Colour <code>ls</code></h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"> <span class="co"># colours for the Gnu ls (from coreutils)</span>
<span class="kw">if [</span> <span class="st">&quot;</span><span class="ot">$TERM</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;dumb&quot;</span><span class="kw"> ]</span>; <span class="kw">then</span>
    <span class="kw">export</span> <span class="ot">LS_OPTIONS=</span><span class="st">&#39;--color=auto -F -G -h&#39;</span>
    <span class="kw">eval</span> <span class="kw">`gdircolors</span> ~/.dircolors<span class="kw">`</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>Here's another if statement. Notice that this time we don't have a return before the <code>then</code>, instead we have a semi-colon, <code>;</code> to represent the same thing. On any line we can replace a return with a semi-colon.</p>
</aside>
</section>
<section id="make-a-case-1" class="slide level3">
<h1>Make A Case</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="kw">echo</span> -n <span class="st">&quot;Word: &quot;</span> <span class="kw">;</span> <span class="kw">read</span> <span class="ot">WORD</span>

<span class="kw">case</span> <span class="ot">$WORD</span><span class="kw"> in</span>
    <span class="kw">(</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">)</span>    <span class="kw">echo</span> <span class="st">&quot;No Way&quot;</span> <span class="kw">;;</span>
    <span class="kw">(</span> <span class="kw">*</span> <span class="kw">)</span>           <span class="kw">echo</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">;;</span>
<span class="kw">esac</span></code></pre></div>
<aside class="notes">
<p>Here is a case statement. If the variable matches the value in the parentheses it runs the statement on that line. The value <code>( * )</code> matches everything. The <code>read</code> statement reads from the command line until you press return.</p>
</aside>
</section>
<section id="using-and-1" class="slide level3">
<h1>Using &amp;&amp; and ||</h1>
<p>A <strong>AND</strong> B <strong>OR</strong> C</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">[</span> <span class="kw">`id</span> -u<span class="kw">`</span> <span class="ot">=</span> 0<span class="kw"> ]</span> <span class="kw">&amp;&amp;</span> <span class="ot">PS1=</span><span class="st">&quot;\[\033[31m\]\h:\W \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span> <span class="kw">\</span>
<span class="kw">||</span> <span class="ot">PS1=</span><span class="st">&quot;\[\033[34m\]\h:\w \u</span><span class="dt">\$</span><span class="st">\[\033[0m\] &quot;</span></code></pre></div>
<aside class="notes">
<p>Here we use logic operators rather than if and else. This is perfect if you only want to run single commands. It works because the shell is &quot;lazy&quot; and won't run the second command in an AND when the first is false, then because the first set of statements is false it will run the command after the OR.</p>
</aside>
</section>
<section id="checking-the-result-code-1" class="slide level3">
<h1>Checking The Result Code</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">if</span> <span class="kw">ls</span> mysillyfilename <span class="kw">;</span> <span class="kw">then</span>
    <span class="kw">echo</span> <span class="st">&quot;File exists.&quot;</span>
<span class="kw">fi</span>

<span class="co"># checking result code variable</span>
<span class="kw">ls</span> mysillyfilename
<span class="kw">if [</span> <span class="ot">$?</span> <span class="ot">=</span> 0<span class="kw"> ]</span> ; <span class="kw">then</span>
    <span class="kw">echo</span> <span class="st">&quot;File exists.&quot;</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>We can use the result from any command in an <code>if</code> statement. The special variable <code>$?</code> saves the result of the last command.</p>
</aside>
</section>
<section id="checking-a-file-1" class="slide level3">
<h1>Checking A File</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">if [</span> <span class="ot">-e</span> README.md<span class="kw"> ]</span> ; <span class="kw">then</span>
    <span class="kw">echo</span> <span class="st">&quot;Readme exists&quot;</span>
<span class="kw">fi</span></code></pre></div>
<aside class="notes">
<p>We can also test files, their existence and type. Here we use <code>-e</code> to test that the file exists.</p>
</aside>
</section>
<section id="file-checks" class="slide level3">
<h1>File Checks</h1>
<table>
<tbody>
<tr class="odd">
<td style="text-align: center;">-a</td>
<td style="text-align: left;">if file exists</td>
<td style="text-align: center;">-d</td>
<td style="text-align: left;">if file is directory</td>
</tr>
<tr class="even">
<td style="text-align: center;">-e</td>
<td style="text-align: left;">if file exists</td>
<td style="text-align: center;">-r</td>
<td style="text-align: left;">if file is readable</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-w</td>
<td style="text-align: left;">if file is writeable</td>
<td style="text-align: center;">-x</td>
<td style="text-align: left;">if file is executable</td>
</tr>
<tr class="even">
<td style="text-align: center;">-O</td>
<td style="text-align: left;">is owned by the user</td>
<td style="text-align: center;">-G</td>
<td style="text-align: left;">is owned by the group</td>
</tr>
</tbody>
</table>
<aside class="notes">
<p>Here is a list of some of the more useful file tests. <code>man test</code> will get you a comprehensive list and a list of all the comparison operators for strings and numbers</p>
</aside>
</section>
<section id="round-and-round" class="slide level3">
<h1>Round And Round</h1>
<ul>
<li>For</li>
<li>While</li>
<li>Done</li>
</ul>
</section>
<section id="while-loop" class="slide level3">
<h1>While Loop</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="kw">echo</span> -n <span class="st">&quot;Word: &quot;</span> <span class="kw">;</span> <span class="kw">read</span> <span class="ot">WORD</span>

<span class="kw">while [</span> <span class="ot">$WORD</span> <span class="ot">-ne</span> <span class="st">&quot;&quot;</span><span class="kw"> ]</span> ; <span class="kw">do</span>
    <span class="kw">case</span> <span class="ot">$WORD</span><span class="kw"> in</span>
        <span class="kw">(</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">;;</span>
        <span class="kw">(</span> <span class="st">&quot;Bar&quot;</span> <span class="kw">)</span>       <span class="kw">echo</span> <span class="st">&quot;Foo&quot;</span> <span class="kw">;;</span>
        <span class="kw">(</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">)</span>    <span class="kw">echo</span> <span class="st">&quot;No Way&quot;</span> <span class="kw">;;</span>
        <span class="kw">(</span> <span class="kw">*</span> <span class="kw">)</span>           <span class="kw">echo</span> <span class="st">&quot;FooBar&quot;</span> <span class="kw">;;</span>
    <span class="kw">esac</span>
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>A while loop. So long as the statement is true it will loop forever.</p>
</aside>
</section>
<section id="for-ever" class="slide level3">
<h1>For Ever</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">for</span> <span class="kw">file</span> in *.sh <span class="kw">;</span> <span class="kw">do</span>
    <span class="kw">echo</span> <span class="ot">$file</span>
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>A for loop. The echo statement will run for each item in <code>*.sh</code></p>
</aside>
</section>
<section id="even-more-for" class="slide level3">
<h1>Even More For</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">for</span> <span class="kw">((</span> i = 1 ; i &lt;= <span class="ot">$1</span> ; i++ <span class="kw">))</span> ; <span class="kw">do</span>
    <span class="kw">echo</span> <span class="st">&quot;I is </span><span class="ot">$i</span><span class="st">&quot;</span>
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>This is the C style <code>for</code>. There are the 3 parts. The first is run at the beginning of the <code>for</code>. The second is the test which is done at the top of the loop (so it is possible for the loop to never run). The third part is run at the bottom of the loop.</p>
</aside>
</section>
<section id="expanding-variables" class="slide level3">
<h1>Expanding Variables</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">LIST=</span><span class="st">&quot;Foo Bar Baz&quot;</span>
<span class="kw">for</span> <span class="kw">i</span> in <span class="ot">$LIST</span> <span class="kw">;</span> <span class="kw">do</span>
    <span class="kw">echo</span> <span class="ot">$i</span>
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>We can also loop through items in a variable.</p>
</aside>
</section>
<section id="field-separator" class="slide level3">
<h1>Field Separator</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">IFS=</span><span class="st">&quot;:&quot;</span>
<span class="ot">LIST=</span><span class="st">&quot;a:b:c d&quot;</span>
<span class="kw">for</span> <span class="kw">i</span> in <span class="ot">$LIST</span> <span class="kw">;</span> <span class="kw">do</span>
    <span class="kw">echo</span> <span class="ot">$i</span> 
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>What defines an &quot;item&quot; is the Internal Field Seperator or IFS. Here we change it to a colon.</p>
</aside>
</section>
<section id="special-characters-in-strings" class="slide level3">
<h1>Special Characters In Strings</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">IFS=</span><span class="st">$&#39;</span><span class="dt">\t</span><span class="st">&#39;</span>
<span class="ot">LIST=</span><span class="st">$&#39;a</span><span class="dt">\t</span><span class="st">b</span><span class="dt">\t</span><span class="st">c d&#39;</span>
<span class="kw">for</span> <span class="kw">i</span> in <span class="ot">$LIST</span> <span class="kw">;</span> <span class="kw">do</span>
    <span class="kw">echo</span> <span class="ot">$i</span> 
<span class="kw">done</span></code></pre></div>
<aside class="notes">
<p>You can change the IFS to a special character such as a tab or a newline. To get either in a string you can surround the string like this and then <code>\t</code> is replaced by tab and <code>\n</code> is replaced by a newline.</p>
</aside>
</section>
<section id="redirection" class="slide level3">
<h1>Redirection</h1>
</section>
<section id="how-its-done" class="slide level3">
<h1>How It's Done</h1>
<ul>
<li>Fresh output <code>ls &gt; files.txt</code></li>
<li>Append to the file <code>ls &gt;&gt; files.txt</code></li>
</ul>
<aside class="notes">
<p>We can take the output of a command and redirect it to a file. A single greater than will overwrite an existing file, two will append to the end of an existing file. Both will create the file if it doesn't exist.</p>
</aside>
</section>
<section id="using-tee" class="slide level3">
<h1>Using tee</h1>
<ul>
<li>Fresh file <code>ls | tee files.txt</code></li>
<li>Append to the file <code>ls | tee -a files.txt</code></li>
</ul>
<aside class="notes">

</aside>
</section>
<section id="both-out-and-err" class="slide level3">
<h1>Both OUT and ERR</h1>
<p>If you want to log to the same file: <code>command1 &gt;&gt; log_file 2&gt;&amp;1</code></p>
If you want different files: <code>command1 &gt;&gt; log_file 2&gt;&gt; err_file</code>
<aside class="notes">
<p>There are actually <em>two</em> outputs. The &quot;ordinary&quot; one, STDOUT and one for errors, STDERR. They are numbered 1 and 2 respectively and we can direct them both if we want.</p>
</aside>
</section>
<section id="here-documents" class="slide level3">
<h1>Here documents</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">logger</span> -t SYSADMIN &lt;&lt;EOM
I am going to <span class="kw">reboot</span> the system
I&#39;m doing i<span class="kw">t</span> <span class="kw">because</span> I want to
EOM</code></pre></div>
<aside class="notes">
<p>Open up Console then run these lines. Logger allows you to write to the system log. Using a here document allows us to write multiple lines.</p>
</aside>
</section>
<section id="maths-using-expr" class="slide level3">
<h1>Maths Using <code>expr</code></h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="ot">WEEKS=$1</span>
<span class="ot">DAYS=</span><span class="kw">`expr</span> <span class="ot">$WEEKS</span> <span class="st">&#39;*&#39;</span> <span class="st">&#39;7&#39;</span><span class="kw">`</span>
<span class="kw">date</span> -v +<span class="ot">${DAYS}</span>d </code></pre></div>
<aside class="notes">
<p>We can do maths in scripts using the <code>expr</code> command.</p>
</aside>
</section>
<section id="maths-using-expansion" class="slide level3">
<h1>Maths Using Expansion</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="ot">WEEKS=$1</span>
<span class="ot">DAYS=$(($WEEKS</span>*7<span class="ot">))</span>
<span class="kw">date</span> -v +<span class="ot">${DAYS}</span>d </code></pre></div>
<p>Or even <code>echo $(( 7 * ( 4 + 2 ) ))</code> Though the spaces are not required <code>echo $((7*(4+2)))</code></p>
<aside class="notes">
<p>It often looks clearer to use shell arithmetic expansion for maths.</p>
</aside>
</section>
<section id="improve-the-look" class="slide level3">
<h1>Improve The Look</h1>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ot">WEEKS=$1</span>
<span class="ot">DAYS=</span><span class="kw">`expr</span> <span class="ot">$WEEKS</span> <span class="st">&#39;*&#39;</span> <span class="st">&#39;7&#39;</span><span class="kw">`</span>
<span class="kw">date</span> -v +<span class="ot">${DAYS}</span>d <span class="kw">|</span> <span class="kw">awk</span> <span class="st">&#39;{ print $1 &quot; &quot; $2 &quot; &quot; $3 &quot; &quot; $4 }&#39;</span></code></pre></div>
<aside class="notes">
<p>We can pipe the output of the <code>date</code> command to a utility called <code>awk</code>. This is a powerful text processing language but here we just use a simple command. This one just prints some of the fields. Awk is often used to trim or reformat the output of another command.</p>
</aside>
</section>
<section id="launchagents-launchdaemons" class="slide level3">
<h1>LaunchAgents &amp; LaunchDaemons</h1>
<ul>
<li>LaunchAgents run at user login</li>
<li>definition found in ~/Library/LaunchAgents/</li>
<li>LaunchDaemons run at boot</li>
<li>definition found in /System/Library/LaunchDaemons/</li>
</ul>
<aside class="notes">
<p>Here we get into what we can do with a script. Anything can be a LauchAgent or LaunchDaemons, so we can write a script that gets installed as part of the system.</p>
<p>Both LaunchAgents and LaunchDaemons can run once, stay running or be re-run at an interval.</p>
<p>The actual script can live anywhere but the file defining how it is run lives in one of the two spots.</p>
</aside>
</section>
<section id="controlling-launchagents" class="slide level3">
<h1>Controlling LaunchAgents</h1>
<ul>
<li>plist file</li>
<li>named 'something.command.plist' e.g.</li>
<li>com.honestpuck.command.plist</li>
</ul>
<aside class="notes">
<p>The defining file is a plist. It is usully named as a reverse domain name followed by the command name.</p>
<p>You can write one by hand but it is easier to use a utility such as Lingon X or LaunchControl.</p>
</aside>
</section>
<section id="giving-it-a-try" class="slide level3">
<h1>Giving It A Try</h1>
<ul>
<li>agent_test.sh</li>
<li>com.honestpuck.test.plist</li>
</ul>
<aside class="notes">
<p>Let's give it a try by creating a LaunchAgent, com.honestpuck.test.plist, to run <code>agent_test.sh</code> using LaunchControl.</p>
</aside>
</section>
<section id="a-complex-example" class="slide level3">
<h1>A Complex Example</h1>
<ul>
<li>local.job.plist</li>
</ul>
<aside class="notes">
<p>com.honestpuck.test.plist is a simple example. Let's create a more complex one that runs every hour.</p>
</aside>
</section>
<section id="putting-it-all-together" class="slide level3">
<h1>Putting it all together</h1>
<ul>
<li>dock_setup.sh</li>
</ul>
<aside class="notes">
<p>Now let's put it all together by looking at a longish shell script that can get used as a LaunchAgent.</p>
</aside>
</section>
<section id="getting-a-profile" class="slide level3">
<h1>Getting A Profile</h1>
<ul>
<li>bash_profile.sh</li>
</ul>
<aside class="notes">
<p>Another example, let's look at part of my .bash_profile file that we have been using.</p>
</aside>
</section>
<section id="places-to-go" class="slide level3">
<h1>Places To Go</h1>
<ul>
<li>This presentation <a href="http://bit.ly/xw2016-9" class="uri">http://bit.ly/xw2016-9</a></li>
<li>Apple have a good <code>bash</code> tutorial <a href="http://apple.co/1MFChLE" class="uri">http://apple.co/1MFChLE</a></li>
<li>Good <code>bash</code> tutorial <a href="http://bit.ly/xw2016-2" class="uri">http://bit.ly/xw2016-2</a></li>
<li>Comprehensive <code>awk</code> tutorial <a href="http://bit.ly/xw2016-5" class="uri">http://bit.ly/xw2016-5</a></li>
<li>Effective AWK Programming <a href="http://bit.ly/xw2016-7" class="uri">http://bit.ly/xw2016-7</a></li>
<li>All About Redirection <a href="http://bit.ly/xw2016-1" class="uri">http://bit.ly/xw2016-1</a></li>
</ul>
<aside class="notes">
<p>Before we go here are some web sites you might like to visit for more information.</p>
</aside>
</section>
<section id="more-places-to-go" class="slide level3">
<h1>More Places To Go</h1>
<ul>
<li>Apple's page on Launch Daemons and Agents <a href="http://bit.ly/xw2016-8" class="uri">http://bit.ly/xw2016-8</a></li>
<li>Lingon X <a href="http://bit.ly/xw2016-6" class="uri">http://bit.ly/xw2016-6</a></li>
<li>LaunchControl <a href="http://bit.ly/xw2016-11" class="uri">http://bit.ly/xw2016-11</a></li>
<li>Good tutorial on LaunchAgent and Daemon format <a href="http://launchd.info" class="uri">http://launchd.info</a></li>
<li>My home directory on git <a href="http://bit.ly/xw2016-10" class="uri">http://bit.ly/xw2016-10</a></li>
<li>MacAdmins Slack channel <a href="https://macadmins.herokuapp.com" class="uri">https://macadmins.herokuapp.com</a></li>
</ul>
<aside class="notes">
<p>And some more :)</p>
</aside>
</section>
<section id="a-final-list" class="slide level3">
<h1>A Final List</h1>
<ul>
<li>Input font <a href="http://input.fontbureau.com" class="uri">http://input.fontbureau.com</a></li>
<li>Solarized colour theme <a href="http://ethanschoonover.com/solarized" class="uri">http://ethanschoonover.com/solarized</a></li>
<li>bash completion <a href="http://bit.ly/xw2016-12" class="uri">http://bit.ly/xw2016-12</a></li>
<li>shellcheck, a script checker <a href="http://www.shellcheck.net" class="uri">http://www.shellcheck.net</a></li>
</ul>
</section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
